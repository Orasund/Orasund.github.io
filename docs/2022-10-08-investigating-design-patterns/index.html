<!doctype html><html><head><title>Investigating Design Patterns | Functional Fieldnotes</title><meta charset="utf-8"><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.1/highlight.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.1/languages/elm.min.js"></script><script>hljs.initHighlightingOnLoad();</script><link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.1/styles/default.min.css" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Open+Sans|Proza+Libre|Inconsolata" rel="stylesheet" type="text/css"></head><body><div style="display: flex; flex-direction: row; flex-wrap: wrap; justify-content: space-between; align-items: center;" class="navigation"><div style="display: flex;"><a href="/posts">Functional Fieldnotes</a></div><div style="display: flex; flex-direction: row; flex-wrap: wrap; gap: 16px;"></div></div><div class="sidebar"><h2>Posts</h2><ul><li>The Pragmatic Programmer</li><li>The Little Typer</li><li>Terminology Overview</li><li>Tracery Io</li><li>Some Thoughts On TDD</li><li>Simple Software</li><li>Exploring Monads</li><li>Functional Design Patterns</li><li>Investigating Design Patterns</li></ul></div><div class="sidebar2"><div style="display: flex; flex-direction: column; position: sticky; top: 0px;"><h2>Table of Content</h2><ol><li><a href="#Creational_Patterns">Creational Patterns</a><ol><li><a href="#__Factory_Pattern">❌ Factory Pattern</a><ol></ol></li><li><a href="#__Abstract_Factory_Pattern">❌ Abstract Factory Pattern</a><ol></ol></li><li><a href="#__Builder_Pattern">✅ Builder Pattern</a><ol></ol></li><li><a href="#__Singleton_Pattern">❌ Singleton Pattern</a><ol></ol></li><li><a href="#__Prototype_Pattern">❌ Prototype Pattern</a><ol></ol></li></ol></li><li><a href="#Structural_Patterns">Structural Patterns</a><ol><li><a href="#__Adapter_Pattern">❌ Adapter Pattern</a><ol></ol></li><li><a href="#__Bridge_Pattern">❌ Bridge Pattern</a><ol></ol></li><li><a href="#__Composite_Pattern">❌ Composite Pattern</a><ol></ol></li><li><a href="#__Decorator_Pattern">❌ Decorator Pattern</a><ol></ol></li><li><a href="#__Facade_Pattern">❌ Facade Pattern</a><ol></ol></li><li><a href="#__Flyweight_Pattern">✅ Flyweight Pattern</a><ol></ol></li><li><a href="#__Proxy_Pattern">✅ Proxy Pattern</a><ol></ol></li></ol></li><li><a href="#Behavioral_Patterns">Behavioral Patterns</a><ol><li><a href="#__Chain_of_Responsibility">✅ Chain of Responsibility</a><ol></ol></li><li><a href="#__Command">❌ Command</a><ol></ol></li><li><a href="#__Iterator">❌ Iterator</a><ol></ol></li><li><a href="#__Mediator_Pattern">✅ Mediator Pattern</a><ol></ol></li><li><a href="#__Memento_Pattern">❌ Memento Pattern</a><ol></ol></li><li><a href="#__Observer_Pattern">✅ Observer Pattern</a><ol></ol></li><li><a href="#__State_Pattern">✅ State Pattern</a><ol></ol></li><li><a href="#__Strategy_Pattern">❌ Strategy Pattern</a><ol></ol></li><li><a href="#__Template_Pattern">✅ Template Pattern</a><ol></ol></li><li><a href="#__Visitor_Pattern">❌ Visitor Pattern</a><ol></ol></li></ol></li></ol></div></div><div class="content"><h1 class="title">Investigating Design Patterns</h1><div class="post-metadata"><span>2022-10-08</span><span>•</span><a href="/tags/elm">elm</a><a href="/tags/functional programming">functional programming</a><a href="/tags/monad">monad</a><a href="/tags/state machine">state machine</a></div><p><strong>Keywords:</strong> Elm, Functional Programming, Book</p><br><br><div class="markdown"><p>There is this myth, that functional programming does not have any design patterns. <a href="https://www.youtube.com/watch?v=srQt1NAHYC0">See Functional Design Patterns by Scott Wlaschin</a></p><p>I wanted to know myself if this is actually a valid statement and if not how many design pattern are actually outdated in the days of functional programming. My language of choice will be Elm.</p><p>I will use ✅ for patterns that have a place in function programming and ❌ for patterns that are too easy to really call them a "pattern" or for patterns that are simply outdated.</p><h1 id="Creational_Patterns">Creational Patterns</h1><h2 id="__Factory_Pattern">❌ Factory Pattern</h2><p><a href="https://refactoring.guru/design-patterns/factory-method">https://refactoring.guru/design-patterns/factory-method</a></p><pre><code>type TrasportationType
    = Road
    | Sea

createTruck : Transport

createShip : Transport

transportFactory : TransportationType -&gt; Transport
</code></pre><p>The factory pattern is just a function that takes some additional arguments to decide how to construct a structure.</p><h2 id="__Abstract_Factory_Pattern">❌ Abstract Factory Pattern</h2><p><a href="https://refactoring.guru/design-patterns/abstract-factory">https://refactoring.guru/design-patterns/abstract-factory</a></p><pre><code>type FurnitureType
    = Chair
    | CoffeeTable
    | Sofa

type FurnitureStyle
    = Victorian
    | Modern

modernFactory : FurnitureType -&gt; Furniture

victorianFactory : FurnitureType -&gt; Furniture

furnitureFactory : FurnitureStyle -&gt; FurnitureType -&gt; Furniture
</code></pre><p>An abstract factory pattern is just a partial function.</p><h2 id="__Builder_Pattern">✅ Builder Pattern</h2><p><a href="https://refactoring.guru/design-patterns/builder">https://refactoring.guru/design-patterns/builder</a></p><pre><code>newHouse : HouseBuilder

withWalls : WallDesign -&gt; HouseBuilder -&gt; HouseBuilder

withDoors : DoorDesign -&gt; HouseBuilder -&gt; HouseBuilder

withWindows : WindowDesign -&gt; HouseBuilder -&gt; HouseBuilder

withRoof : RoofDesign -&gt; HouseBuilder -&gt; HouseBuilder

withGarage : GarageDesign -&gt; HouseBuilder -&gt; HouseBuilder

build : HouseBuilder -&gt; House
</code></pre><p>The builder pattern use a seperate builder to collect all the information needed for constructing the desired structure.</p><h2 id="__Singleton_Pattern">❌ Singleton Pattern</h2><p><a href="https://refactoring.guru/design-patterns/singleton">https://refactoring.guru/design-patterns/singleton</a></p><p>The singleton pattern is the default behavior for functional programming.</p><h2 id="__Prototype_Pattern">❌ Prototype Pattern</h2><p><a href="https://refactoring.guru/design-patterns/prototype">https://refactoring.guru/design-patterns/prototype</a></p><p>Coping is the default behavior of functional programming, therefor the prototype makes no sense in this context.</p><h1 id="Structural_Patterns">Structural Patterns</h1><h2 id="__Adapter_Pattern">❌ Adapter Pattern</h2><p><a href="https://refactoring.guru/design-patterns/adapter">https://refactoring.guru/design-patterns/adapter</a></p><pre><code>computeXml : XML -&gt; XML

xmlToJson : XML -&gt; Json

jsonToXml : Json -&gt; XML

jsonAdapter : (XML -&gt; XML) -&gt; Json -&gt; Json
</code></pre><p>A adapter is just a higher order function with a set of mappers.</p><h2 id="__Bridge_Pattern">❌ Bridge Pattern</h2><p><a href="https://refactoring.guru/design-patterns/bridge">https://refactoring.guru/design-patterns/bridge</a></p><p>The bridge pattern uses composition over inherence. This is the default behavior for functional programming.</p><h2 id="__Composite_Pattern">❌ Composite Pattern</h2><p><a href="https://refactoring.guru/design-patterns/composite">https://refactoring.guru/design-patterns/composite</a></p><pre><code>type Order
    = Product { price : Int }
    | Box (List Order)

calculatePrice : Order -&gt; Int
calculatePrice order =
    case order of
        Product {price} -&gt;
            price
        Box list -&gt;
            list
                |&gt; List.map calculatePrice
                |&gt; List.sum
</code></pre><p>The composite pattern is just a recursive type and a recursive function to go with it.</p><p>Note the function on display is not tail recursive and therefore not the most efficient.</p><h2 id="__Decorator_Pattern">❌ Decorator Pattern</h2><p><a href="https://refactoring.guru/design-patterns/decorator">https://refactoring.guru/design-patterns/decorator</a></p><pre><code>sendEmail : {email : String} -&gt; String -&gt; Cmd msg

sendSms : {phone : String} -&gt; String -&gt; Cmd msg

sendFacebook : {facebookId : String} -&gt; String -&gt; Cmd msg

sendSlack : {slackId : String} -&gt; String -&gt; Cmd msg

andThen : (String -&gt; Cmd msg) -&gt; (String,Cmd msg) -&gt; (String,Cmd msg)
</code></pre><p>The decorator pattern makes no real sense in the context of functional programming, however we can produce the same behavior using the Monad pattern.</p><p>In this example <code>(String,Cmd msg)</code> is the monad, passing the string to various functions.</p><h2 id="__Facade_Pattern">❌ Facade Pattern</h2><p><a href="https://refactoring.guru/design-patterns/facade">https://refactoring.guru/design-patterns/facade</a></p><p>The facade pattern is essentially saying that one can write simpler modules that call more complicated onces.</p><h2 id="__Flyweight_Pattern">✅ Flyweight Pattern</h2><p>[https://refactoring.guru/design-patterns/flyweight]
(https://refactoring.guru/design-patterns/flyweight)</p><pre><code>type alias MovingParticle
    { particle: Id
    , state : ParticleState
    }

type alias Game =
    { particles : Dict Id Particle
    , movingParticles : Dict Position MovingParticle
    }
</code></pre><p>The flyweight pattern states that for memory intense structures, one should store the common parts in a dictionary and only reference it by its id.</p><h2 id="__Proxy_Pattern">✅ Proxy Pattern</h2><p><a href="https://refactoring.guru/design-patterns/proxy">https://refactoring.guru/design-patterns/proxy</a></p><pre><code>pay : Int -&gt; CreditCard -&gt; CreditCard

syncCreditCard : CreditCard -&gt; Cmd msg
</code></pre><p>The proxy pattern simplifies time and resource intense computations by creating a proxy structure that simulates the computation and regularly syncs up with the real thing.</p><h1 id="Behavioral_Patterns">Behavioral Patterns</h1><h2 id="__Chain_of_Responsibility">✅ Chain of Responsibility</h2><p><a href="https://refactoring.guru/design-patterns/chain-of-responsibility">https://refactoring.guru/design-patterns/chain-of-responsibility</a></p><pre><code>type Handler =
    Request -&gt; Maybe Response

handleRequest : Request -&gt; List Handler -&gt; Maybe Response
handleRequest request handlers =
    case handlers of
        [] -&gt; Nothing
        head :: tail -&gt;
            case head request of
                Just head -&gt;
                    Just head
                Nothing -&gt;
                    handleRequest request tail
</code></pre><p>The chain of responsibility is a list of possible implementation. We go through the list and find the first implementation that is successful.</p><h2 id="__Command">❌ Command</h2><p><a href="https://refactoring.guru/design-patterns/command">https://refactoring.guru/design-patterns/command</a></p><pre><code>type alias Command =
    State -&gt; State

copy : String -&gt; Command

cut : Segment -&gt; Command

paste : Segment -&gt; Command

undo : Command

execute : Command -&gt; State -&gt; State
</code></pre><p>The Command pattern uses functions as data to separate the creation of the function from the execution.</p><h2 id="__Iterator">❌ Iterator</h2><p><a href="https://refactoring.guru/design-patterns/iterator">https://refactoring.guru/design-patterns/iterator</a></p><p>Folding takes the role of iterators in functional programming.</p><h2 id="__Mediator_Pattern">✅ Mediator Pattern</h2><p><a href="https://refactoring.guru/design-patterns/mediator">https://refactoring.guru/design-patterns/mediator</a></p><pre><code>type alias Mediator =
    { components : Dict String (State -&gt; State)
    , state : State
    }

notify : String -&gt; Mediator -&gt; Mediator
notify component mediator =
    let
        fun = 
            mediator.components
                |&gt; Dict.get component
    in
    {mediator | state = fun mediator.state}
</code></pre><p>The Mediator is a dictionary containing update functions.</p><h2 id="__Memento_Pattern">❌ Memento Pattern</h2><p><a href="https://refactoring.guru/design-patterns/memento">https://refactoring.guru/design-patterns/memento</a></p><pre><code>type Editor =
    Editor (State,List State)

save : Editor -&gt; Editor
save (Editor (state,list)) =
    Editor (state,state :: list)

undo : Editor -&gt; Editor
undo (Editor (state,list)) =
    case list of
        head :: tail -&gt;
            Editor (head, tail)
        [] -&gt; 
            Editor (state,list)
</code></pre><p>The Memento pattern is an opaque non empty list with functions to push onto and pull from the list.</p><h2 id="__Observer_Pattern">✅ Observer Pattern</h2><p><a href="https://refactoring.guru/design-patterns/observer">https://refactoring.guru/design-patterns/observer</a></p><pre><code>type alias Model =
    { subscriber : List (State -&gt; State)
    , state : State
    }

notifySubscriber : Model -&gt; Model
notifySubscriber model =
    { model
    | state =
        model.subscriber
            |&gt; List.foldl 
                (\fun state -&gt; fun state )
                model.state
    }
</code></pre><p>The Observer Pattern is nothing more then folding over a list of update functions.</p><h2 id="__State_Pattern">✅ State Pattern</h2><p><a href="https://refactoring.guru/design-patterns/state">https://refactoring.guru/design-patterns/state</a></p><pre><code>type alias State =
    { document : Document
    , publish : Document -&gt; State
    , render : Document -&gt; Html msg
    }

draft : Document -&gt; State
draft document =
    { document = document
    , publish =
        (\d -&gt;
            if d.isAdmin then
                published d
            else
                moderation d
        )
    , render = renderDraft
    }

moderation : Document -&gt; State
moderation document =
    { document = document
    , publish = (\_ -&gt; published document)
    , render = renderModeration
    }

published : Document -&gt; State
published document =
    { document = document
    , publish = (\_ -&gt; published document)
    , render = renderPublished
    }

renderDraft : Document -&gt; Html msg

renderModeration : Document -&gt; Html msg

renderPublished : Document -&gt; Html msg
</code></pre><p>The article argues against a state machine, as it might not scale that well.</p><p>Instead, the State pattern uses functions inside a record. This way it can chance during runtime.</p><p>I would however only advice this pattern, if a state machine does not do the job.</p><h2 id="__Strategy_Pattern">❌ Strategy Pattern</h2><p><a href="https://refactoring.guru/design-patterns/strategy">https://refactoring.guru/design-patterns/strategy</a></p><pre><code>type alias RouteStrategy =
    Point -&gt; Route -&gt; Route

buildRoute: RouteStrategy -&gt; List Point -&gt; Route

roadStrategy : RouteStrategy

walkingStrategy : RouteStrategy

publicTransportStrategy : RouteStrategy
</code></pre><p>The strategy pattern is nothing more than a higher order function.</p><h2 id="__Template_Pattern">✅ Template Pattern</h2><p><a href="https://refactoring.guru/design-patterns/template-method">https://refactoring.guru/design-patterns/template-method</a></p><pre><code>type alias Template =
    { extractData : File -&gt; String
    , parseData : String -&gt; Data
    , analyseData : Data -&gt; Analysis
    , toReport : Analysis -&gt; Report
    } 

defaultTemplate : Template

mineData : Template -&gt; File -&gt; Report
</code></pre><p>The idea behind the template pattern is to have a record containing all subfunctions required for the task.</p><h2 id="__Visitor_Pattern">❌ Visitor Pattern</h2><p><a href="https://refactoring.guru/design-patterns/visitor">https://refactoring.guru/design-patterns/visitor</a></p><pre><code>type alias ExportVisitor a =
    a -&gt; Excel

exportFromCity : ExportVisitor City

exportFromIndustry : ExportVisitor Industry

exportFromSightSeeing : ExportVisitor Excel
</code></pre><p>A Visitor is just a function where the implementation depends on the input. Note how it does not matter how <code>City</code>, <code>Industry</code> and <code>Visitor</code> relate with each other. In the example they are part of a Union Type, but this does not has to be.</p></div></div><div style="display: flex; flex-direction: row; flex-wrap: wrap; justify-content: space-between;" class="footer"><div style="display: flex;"></div><div style="display: flex; flex-direction: row; flex-wrap: wrap; gap: 16px; align-items: center;"><div style="display: flex;" class="link"><a href="https://www.linkedin.com/in/lucas-payr-8462911b9/">Build by Lucas Payr</a></div><div style="display: flex;" class="link"><a href="https://github.com/Orasund" style="display: flex; justify-content: center; align-items: center;"><svg width="32" height="32" viewbox="0 0 16 16"><path fill="#fff" d="
M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z
            "></path></svg></a></div><div style="display: flex;" class="link"><a href="https://twitter.com/edzgou" style="display: flex; justify-content: center; align-items: center;"><svg width="32" height="32" viewbox="0 0 16 16"><path fill="#fff" d="
M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809 c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z
            "></path></svg></a></div></div></div><link href="/styles.css" rel="stylesheet" type="text/css"><style>body {
    padding:0px;
    margin:0px;
    background-color:#ffffff;
    color:#363636;
    font-family:Open Sans, Arial, sans-serif;
    font-size:18px;
    line-height:1.4em;
}

a {
    color:#348aa7;
    text-decoration:none;
}

code {
    font-family:Inconsolata, monospace;
}

pre  code {
    overflow-x:scroll !important;
}

h1, h2, h3, h4, h5, h6 {
    font-family:Proza Libre, Helvetica, sans-serif;
    line-height:1.1em;
}

.title {
    font-size:2em;
    margin-bottom:1.61616rem;
}

h1 {
    font-size:1.33333em;
    margin-bottom:1.21212rem;
    border-bottom:1px solid #F0F0F0;
    padding-bottom:4px;
}

h2 {
    font-size:1.2em;
    margin-bottom:0.80808rem;
}

h3, h5, h6 {
    font-size:1em;
    margin-bottom:0.60606rem;
}

p {
    margin:auto auto 1.5rem;
}

small {
    font-size:65%;
}

ul {
    padding-inline-start:30px;
}

ol {
    padding-inline-start:30px;
}

.header-logo {
    padding-top:6px;
    text-align:center;
    background-color:#f2fae8;
}

@media only screen and (min-width: 600px) {
    .header-logo {
        text-align:left;
    border-bottom:2px solid #3c8765;
    }
}

.navigation {
    text-align:center;
    background-color:#f2fae8;
    padding:16px;
}

.content {
    max-width:100vw;
    padding:16px;
}

.footer {
    text-align:center;
    background-color:#348aa7;
    color:#ffffff;
    padding:16px;
}

.footer  a {
    color:#ffffff;
    text-decoration:none;
}

.footer  svg {
    padding-right:5px;
    vertical-align:baseline;
}

.post-metadata {
    margin-top:-0.5em;
    margin-bottom:2em;
}

.post-metadata  a, .post-metadata  span {
    display:inline-block;
    margin-right:5px;
}

.post-metadata  a {
    border:1px solid #e0e0e0;
    border-radius:3px;
    background-color:#f2fae8;
    padding-left:5px;
    padding-right:5px;
}</style></body></html>
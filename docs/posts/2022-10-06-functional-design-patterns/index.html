<!doctype html><html><head><title>Functional Design Patterns | Functional Fieldnotes</title><meta charset="utf-8"><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.1/highlight.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.1/languages/elm.min.js"></script><script>hljs.initHighlightingOnLoad();</script><link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.1/styles/default.min.css" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Open+Sans|Proza+Libre|Inconsolata" rel="stylesheet" type="text/css"></head><body><div style="display: flex; flex-direction: row; flex-wrap: wrap; justify-content: space-between; align-items: center;" class="navigation"><div style="display: flex;"><a href="/posts">Functional Fieldnotes</a></div><div style="display: flex; flex-direction: row; flex-wrap: wrap; gap: 16px;"></div></div><div class="sidebar"><div style="display: flex; flex-direction: column; position: sticky; top: 0px; padding: 8px;"><h2>Table of Content</h2><ol><li><a href="#Monad">Monad</a><ol></ol></li><li><a href="#State_Machines">State Machines</a><ol></ol></li><li><a href="#Domain_Specific_Languages">Domain Specific Languages</a><ol></ol></li></ol></div></div><div class="sidebar2"><div style="display: flex; flex-direction: column; padding: 8px;"><h2>Posts</h2><br><a href="/posts/2022-05-29-the-pragmatic-programmer.md">The Pragmatic Programmer</a><a href="/posts/2022-06-11-the-little-typer.md">The Little Typer</a><a href="/posts/2022-07-27-terminology-overview.md">Terminology Overview</a><a href="/posts/2022-09-18-tracery-io.md">Tracery Io</a><a href="/posts/2022-09-22-Some-Thoughts-on-TDD.md">Some Thoughts On TDD</a><a href="/posts/2022-10-05-simple-software.md">Simple Software</a><a href="/posts/2022-10-06-exploring-monads.md">Exploring Monads</a><a href="/posts/2022-10-06-functional-design-patterns.md">Functional Design Patterns</a><a href="/posts/2022-10-08-investigating-design-patterns.md">Investigating Design Patterns</a></div></div><div class="content"><h1 class="title">Functional Design Patterns</h1><div class="post-metadata"><span>2022-10-06</span><span>â€¢</span><a href="/tags/functional programming">functional programming</a><a href="/tags/monad">monad</a><a href="/tags/state machine">state machine</a></div><p><strong>Keywords:</strong> Functional Programming</p><br><br><div class="markdown"><p>There is this myth, that functional programming does not have any design patterns. <a href="https://www.youtube.com/watch?v=srQt1NAHYC0">See Functional Design Patterns by Scott Wlaschin</a></p><p>While this might hold for some of the more known patterns, it is definitely not true in general.
Design Patterns for Functional programming are generally more abstract, hard to pin it down to a use case. I would see it more like a set of tools that you can use, but don't have to.</p><h1 id="Monad">Monad</h1><p>A monad is a fancy word for a data structure with an <code>andThen</code> function:</p><pre><code>andThen : (a -&gt; Monad b) -&gt; Monad a -&gt; Monad b
</code></pre><p>If you want to very fancy, you would say:</p><blockquote><p>The Monad is a monoid in the category of (endo-)Functors.</p></blockquote><p>But for starters its enough to know that its main feature is the <code>andThen</code> function.</p><p>An example for a monad would be a list (andThen = flatMap).</p><p>Main use for Monads is doing effects. Famous monads are: Reader monad, writer monad,IO monad(Reader + Writer), lense monad</p><h1 id="State_Machines">State Machines</h1><p>Basic idea is to define an algebraic data type that specifies allows state transitions and to then have a run function that can manipulate state base on an input:</p><pre><code>update: Msg -&gt; State -&gt; State
</code></pre><p>If you really want to get fancy, you can have the result again be a list of commands</p><pre><code>update: Msg -&gt; State -&gt; (State, List Msg)
</code></pre><p>Join this up with a step function and you are all good to go</p><pre><code>step : (State,List Msg) -&gt; (State,List Msg)
</code></pre><p>Side note: <code>(State,List Msg)</code> is an IO monad. This is because list is a monad and it both reads and writes <code>State</code>.</p><h1 id="Domain_Specific_Languages">Domain Specific Languages</h1><p>A DSL is very powerful. Its number one selling points should be: "A Langauges tailed to your exact company and your use case." Its the highest of all APIs, because you can actually program in it.</p><p>The idea behind is it very simple: You specify a syntax (this can be a Json Schema, some GraphQL or an actual parsed string) and the semantics are provided by your program. Now anyone can come along and write a script using your syntax and send it to your Server. The server will validate it (Essentially checking if you are allowed to do this), then run the script and report back.</p><p>At best this requires a single functional call and you are done.</p><p>SQL is a very nice example. You can do A LOT with just one sql query. Think how many REST endpoints you would need just to provide the same functionality as a SQL statement.</p><p>Other examples include Markdown, Swagger, Moustache.</p><p>But this is actually quite easy to pull of. All you really need it an algebraic data type and a case distinction that does different behavior depending on the case. Next to wrap it in a for-each loop and your semantics are done. For the syntax you can go with Json, YAML or any thing else. It does not need to be fancy at all.</p></div></div><div style="display: flex; flex-direction: row; flex-wrap: wrap; justify-content: space-between;" class="footer"><div style="display: flex;"></div><div style="display: flex; flex-direction: row; flex-wrap: wrap; gap: 16px; align-items: center;"><div style="display: flex;" class="link"><a href="https://www.linkedin.com/in/lucas-payr-8462911b9/">Build by Lucas Payr</a></div><div style="display: flex;" class="link"><a href="https://github.com/Orasund" style="display: flex; justify-content: center; align-items: center;"><svg width="32" height="32" viewbox="0 0 16 16"><path fill="#fff" d="
M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z
            "></path></svg></a></div><div style="display: flex;" class="link"><a href="https://twitter.com/edzgou" style="display: flex; justify-content: center; align-items: center;"><svg width="32" height="32" viewbox="0 0 16 16"><path fill="#fff" d="
M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809 c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z
            "></path></svg></a></div></div></div><link href="/styles.css" rel="stylesheet" type="text/css"><style>body {
    padding:0px;
    margin:0px;
    background-color:#ffffff;
    color:#363636;
    font-family:Open Sans, Arial, sans-serif;
    font-size:16px;
    line-height:1.4em;
}

a {
    color:#348aa7;
    text-decoration:none;
}

code {
    font-family:Inconsolata, monospace;
}

pre  code {
    overflow-x:scroll !important;
}

h1, h2, h3, h4, h5, h6 {
    font-family:Proza Libre, Helvetica, sans-serif;
    line-height:1.1em;
}

.title {
    font-size:2em;
    margin-bottom:1.61616rem;
}

h1 {
    font-size:1.33333em;
    margin-bottom:1.21212rem;
    border-bottom:1px solid #F0F0F0;
    padding-bottom:4px;
}

h2 {
    font-size:1.2em;
    margin-bottom:0.80808rem;
}

h3, h5, h6 {
    font-size:1em;
    margin-bottom:0.60606rem;
}

p {
    margin:auto auto 1.5rem;
}

small {
    font-size:65%;
}

ul {
    padding-inline-start:30px;
}

ol {
    padding-inline-start:30px;
}

.sidebar, .sidebar2 {
    font-size:0.9em;
}

.sidebar  h1, .sidebar  h2, .sidebar  h3, .sidebar2  h1, .sidebar2  h2, .sidebar2  h3 {
    margin:0;
}

.header-logo {
    padding-top:6px;
    text-align:center;
    background-color:#f2fae8;
}

@media only screen and (min-width: 600px) {
    .header-logo {
        text-align:left;
    border-bottom:2px solid #3c8765;
    }
}

.navigation {
    text-align:center;
    background-color:#f2fae8;
    padding:16px;
}

.content {
    max-width:100vw;
    padding:16px;
}

.footer {
    text-align:center;
    background-color:#348aa7;
    color:#ffffff;
    padding:16px;
}

.footer  a {
    color:#ffffff;
    text-decoration:none;
}

.footer  svg {
    padding-right:5px;
    vertical-align:baseline;
}

.post-metadata {
    margin-top:-0.5em;
    margin-bottom:2em;
}

.post-metadata  a, .post-metadata  span {
    display:inline-block;
    margin-right:5px;
}

.post-metadata  a {
    border:1px solid #e0e0e0;
    border-radius:3px;
    background-color:#f2fae8;
    padding-left:5px;
    padding-right:5px;
}</style></body></html>